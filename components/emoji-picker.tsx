"use client"

import { useState } from "react"
import { Smile } from "lucide-react"
import { Button } from "@/components/ui/button"

const emojiCategories = {
  smileys: [
    "ğŸ˜€",
    "ğŸ˜ƒ",
    "ğŸ˜„",
    "ğŸ˜",
    "ğŸ˜…",
    "ğŸ˜‚",
    "ğŸ¤£",
    "ğŸ˜Š",
    "ğŸ˜‡",
    "ğŸ™‚",
    "ğŸ™ƒ",
    "ğŸ˜‰",
    "ğŸ˜Œ",
    "ğŸ˜",
    "ğŸ¥°",
    "ğŸ˜˜",
    "ğŸ˜—",
    "ğŸ˜™",
    "ğŸ˜š",
    "ğŸ˜‹",
    "ğŸ˜›",
    "ğŸ˜",
    "ğŸ˜œ",
    "ğŸ¤ª",
    "ğŸ¤¨",
    "ğŸ§",
    "ğŸ¤“",
    "ğŸ˜",
    "ğŸ¥³",
    "ğŸ˜",
    "ğŸ˜’",
    "ğŸ˜",
    "ğŸ˜”",
    "ğŸ˜Ÿ",
    "ğŸ˜•",
    "ğŸ™",
    "ğŸ˜£",
    "ğŸ˜–",
    "ğŸ˜«",
    "ğŸ˜©",
    "ğŸ¥º",
    "ğŸ˜¢",
    "ğŸ˜­",
    "ğŸ˜¤",
    "ğŸ˜ ",
    "ğŸ˜¡",
    "ğŸ¤¬",
    "ğŸ¤¯",
    "ğŸ˜³",
    "ğŸ¥µ",
    "ğŸ¥¶",
    "ğŸ˜±",
    "ğŸ˜¨",
    "ğŸ˜°",
    "ğŸ˜¥",
    "ğŸ˜“",
  ],
  gestures: [
    "ğŸ‘‹",
    "ğŸ¤š",
    "ğŸ–",
    "âœ‹",
    "ğŸ––",
    "ğŸ‘Œ",
    "ğŸ¤Œ",
    "ğŸ¤",
    "âœŒï¸",
    "ğŸ¤",
    "ğŸ¤Ÿ",
    "ğŸ¤˜",
    "ğŸ¤™",
    "ğŸ‘ˆ",
    "ğŸ‘‰",
    "ğŸ‘†",
    "ğŸ–•",
    "ğŸ‘‡",
    "â˜ï¸",
    "ğŸ‘",
    "ğŸ‘",
    "âœŠ",
    "ğŸ‘Š",
    "ğŸ¤›",
    "ğŸ¤œ",
    "ğŸ‘",
    "ğŸ™Œ",
    "ğŸ‘",
    "ğŸ¤²",
    "ğŸ¤",
    "ğŸ™",
    "ğŸ’ª",
    "ğŸ¦¾",
    "ğŸ¦¿",
    "ğŸ¦µ",
    "ğŸ¦¶",
  ],
  hearts: [
    "â¤ï¸",
    "ğŸ§¡",
    "ğŸ’›",
    "ğŸ’š",
    "ğŸ’™",
    "ğŸ’œ",
    "ğŸ–¤",
    "ğŸ¤",
    "ğŸ¤",
    "ğŸ’”",
    "â¤ï¸â€ğŸ”¥",
    "â¤ï¸â€ğŸ©¹",
    "ğŸ’•",
    "ğŸ’",
    "ğŸ’“",
    "ğŸ’—",
    "ğŸ’–",
    "ğŸ’˜",
    "ğŸ’",
    "ğŸ’Ÿ",
  ],
  animals: [
    "ğŸ¶",
    "ğŸ±",
    "ğŸ­",
    "ğŸ¹",
    "ğŸ°",
    "ğŸ¦Š",
    "ğŸ»",
    "ğŸ¼",
    "ğŸ¨",
    "ğŸ¯",
    "ğŸ¦",
    "ğŸ®",
    "ğŸ·",
    "ğŸ¸",
    "ğŸµ",
    "ğŸ”",
    "ğŸ§",
    "ğŸ¦",
    "ğŸ¤",
    "ğŸ¦†",
    "ğŸ¦…",
    "ğŸ¦‰",
    "ğŸ¦‡",
    "ğŸº",
    "ğŸ—",
    "ğŸ´",
    "ğŸ¦„",
    "ğŸ",
    "ğŸ›",
    "ğŸ¦‹",
    "ğŸŒ",
    "ğŸ",
    "ğŸœ",
    "ğŸ¦Ÿ",
    "ğŸ¦—",
    "ğŸ•·",
    "ğŸ¦‚",
    "ğŸ¢",
    "ğŸ",
    "ğŸ¦",
    "ğŸ¦–",
    "ğŸ¦•",
    "ğŸ™",
    "ğŸ¦‘",
    "ğŸ¦",
    "ğŸ¦",
    "ğŸ¦€",
    "ğŸ¡",
    "ğŸ ",
    "ğŸŸ",
    "ğŸ¬",
    "ğŸ³",
    "ğŸ‹",
    "ğŸ¦ˆ",
    "ğŸŠ",
    "ğŸ…",
    "ğŸ†",
    "ğŸ¦“",
    "ğŸ¦",
    "ğŸ¦§",
    "ğŸ˜",
    "ğŸ¦›",
    "ğŸ¦",
    "ğŸª",
    "ğŸ«",
    "ğŸ¦’",
    "ğŸ¦˜",
    "ğŸƒ",
    "ğŸ‚",
    "ğŸ„",
    "ğŸ",
    "ğŸ–",
    "ğŸ",
    "ğŸ‘",
    "ğŸ¦™",
    "ğŸ",
    "ğŸ¦Œ",
    "ğŸ•",
    "ğŸ©",
    "ğŸ¦®",
    "ğŸ•â€ğŸ¦º",
    "ğŸˆ",
    "ğŸˆâ€â¬›",
    "ğŸ“",
    "ğŸ¦ƒ",
    "ğŸ¦š",
    "ğŸ¦œ",
    "ğŸ¦¢",
    "ğŸ¦©",
    "ğŸ•Š",
    "ğŸ‡",
    "ğŸ¦",
    "ğŸ¦¨",
    "ğŸ¦¡",
    "ğŸ¦¦",
    "ğŸ¦¥",
    "ğŸ",
    "ğŸ€",
    "ğŸ¿",
    "ğŸ¦”",
  ],
  food: [
    "ğŸ",
    "ğŸŠ",
    "ğŸ‹",
    "ğŸŒ",
    "ğŸ‰",
    "ğŸ‡",
    "ğŸ“",
    "ğŸ«",
    "ğŸˆ",
    "ğŸ’",
    "ğŸ‘",
    "ğŸ¥­",
    "ğŸ",
    "ğŸ¥¥",
    "ğŸ¥",
    "ğŸ…",
    "ğŸ†",
    "ğŸ¥‘",
    "ğŸ¥¦",
    "ğŸ¥¬",
    "ğŸ¥’",
    "ğŸŒ¶",
    "ğŸ«‘",
    "ğŸŒ½",
    "ğŸ¥•",
    "ğŸ«’",
    "ğŸ§„",
    "ğŸ§…",
    "ğŸ¥”",
    "ğŸ ",
    "ğŸ¥",
    "ğŸ¥¯",
    "ğŸ",
    "ğŸ¥–",
    "ğŸ¥¨",
    "ğŸ§€",
    "ğŸ¥š",
    "ğŸ³",
    "ğŸ§ˆ",
    "ğŸ¥",
    "ğŸ§‡",
    "ğŸ¥“",
    "ğŸ¥©",
    "ğŸ—",
    "ğŸ–",
    "ğŸ¦´",
    "ğŸŒ­",
    "ğŸ”",
    "ğŸŸ",
    "ğŸ•",
    "ğŸ«“",
    "ğŸ¥ª",
    "ğŸ¥™",
    "ğŸ§†",
    "ğŸŒ®",
    "ğŸŒ¯",
    "ğŸ«”",
    "ğŸ¥—",
    "ğŸ¥˜",
    "ğŸ«•",
    "ğŸ¥«",
    "ğŸ",
    "ğŸœ",
    "ğŸ²",
    "ğŸ›",
    "ğŸ£",
    "ğŸ±",
    "ğŸ¥Ÿ",
    "ğŸ¦ª",
    "ğŸ¤",
    "ğŸ™",
    "ğŸš",
    "ğŸ˜",
    "ğŸ¥",
    "ğŸ¥ ",
    "ğŸ¥®",
    "ğŸ¢",
    "ğŸ¡",
    "ğŸ§",
    "ğŸ¨",
    "ğŸ¦",
    "ğŸ¥§",
    "ğŸ§",
    "ğŸ°",
    "ğŸ‚",
    "ğŸ®",
    "ğŸ­",
    "ğŸ¬",
    "ğŸ«",
    "ğŸ¿",
    "ğŸ©",
    "ğŸª",
    "ğŸŒ°",
    "ğŸ¥œ",
    "ğŸ¯",
  ],
  activities: [
    "âš½",
    "ğŸ€",
    "ğŸˆ",
    "âš¾",
    "ğŸ¥",
    "ğŸ¾",
    "ğŸ",
    "ğŸ‰",
    "ğŸ¥",
    "ğŸ±",
    "ğŸª€",
    "ğŸ“",
    "ğŸ¸",
    "ğŸ’",
    "ğŸ‘",
    "ğŸ¥",
    "ğŸ",
    "ğŸªƒ",
    "ğŸ¥…",
    "â›³",
    "ğŸª",
    "ğŸ¹",
    "ğŸ£",
    "ğŸ¤¿",
    "ğŸ¥Š",
    "ğŸ¥‹",
    "ğŸ½",
    "ğŸ›¹",
    "ğŸ›¼",
    "ğŸ›·",
    "â›¸",
    "ğŸ¥Œ",
    "ğŸ¿",
    "â›·",
    "ğŸ‚",
    "ğŸª‚",
    "ğŸ‹ï¸",
    "ğŸ¤¼",
    "ğŸ¤¸",
    "ğŸ¤º",
    "â›¹ï¸",
    "ğŸ¤¾",
    "ğŸŒï¸",
    "ğŸ‡",
    "ğŸ§˜",
    "ğŸŠ",
    "ğŸš´",
    "ğŸšµ",
    "ğŸª",
    "ğŸ­",
    "ğŸ¨",
    "ğŸ¬",
    "ğŸ¤",
    "ğŸ§",
    "ğŸ¼",
    "ğŸ¹",
    "ğŸ¥",
    "ğŸª˜",
    "ğŸ·",
    "ğŸº",
    "ğŸª—",
    "ğŸ¸",
    "ğŸª•",
    "ğŸ»",
    "ğŸ²",
    "â™Ÿ",
    "ğŸ¯",
    "ğŸ³",
    "ğŸ®",
    "ğŸ°",
    "ğŸ§©",
  ],
  objects: [
    "âŒš",
    "ğŸ“±",
    "ğŸ“²",
    "ğŸ’»",
    "âŒ¨ï¸",
    "ğŸ–¥",
    "ğŸ–¨",
    "ğŸ–±",
    "ğŸ–²",
    "ğŸ•¹",
    "ğŸ—œ",
    "ğŸ’¾",
    "ğŸ’¿",
    "ğŸ“€",
    "ğŸ“¼",
    "ğŸ“·",
    "ğŸ“¸",
    "ğŸ“¹",
    "ğŸ¥",
    "ğŸ“½",
    "ğŸ",
    "ğŸ“",
    "â˜ï¸",
    "ğŸ“Ÿ",
    "ğŸ“ ",
    "ğŸ“º",
    "ğŸ“»",
    "ğŸ™",
    "ğŸš",
    "ğŸ›",
    "ğŸ§­",
    "â±",
    "â²",
    "â°",
    "ğŸ•°",
    "âŒ›",
    "â³",
    "ğŸ“¡",
    "ğŸ”‹",
    "ğŸ”Œ",
    "ğŸ’¡",
    "ğŸ”¦",
    "ğŸ•¯",
    "ğŸª”",
    "ğŸ§¯",
    "ğŸ›¢",
    "ğŸ’¸",
    "ğŸ’µ",
    "ğŸ’´",
    "ğŸ’¶",
    "ğŸ’·",
    "ğŸª™",
    "ğŸ’°",
    "ğŸ’³",
    "ğŸ§¾",
    "ğŸ’",
    "âš–ï¸",
    "ğŸªœ",
    "ğŸ§°",
    "ğŸª›",
    "ğŸ”§",
    "ğŸ”¨",
    "âš’",
    "ğŸ› ",
    "â›",
    "ğŸªš",
    "ğŸ”©",
    "âš™ï¸",
    "ğŸª¤",
    "ğŸ§±",
    "â›“",
    "ğŸ§²",
    "ğŸ”«",
    "ğŸ’£",
    "ğŸ§¨",
    "ğŸª“",
    "ğŸ”ª",
    "ğŸ—¡",
    "âš”ï¸",
    "ğŸ›¡",
    "ğŸš¬",
    "âš°ï¸",
    "ğŸª¦",
    "âš±ï¸",
    "ğŸº",
    "ğŸ”®",
    "ğŸ“¿",
    "ğŸ§¿",
    "ğŸ’ˆ",
    "âš—ï¸",
    "ğŸ”­",
    "ğŸ”¬",
    "ğŸ•³",
    "ğŸ©¹",
    "ğŸ©º",
    "ğŸ’Š",
    "ğŸ’‰",
    "ğŸ©¸",
    "ğŸ§¬",
    "ğŸ¦ ",
    "ğŸ§«",
    "ğŸ§ª",
    "ğŸŒ¡",
    "ğŸ§¹",
    "ğŸª ",
    "ğŸ§º",
    "ğŸ§»",
    "ğŸš½",
    "ğŸš°",
    "ğŸš¿",
    "ğŸ›",
    "ğŸ›€",
    "ğŸ§¼",
    "ğŸª¥",
    "ğŸª’",
    "ğŸ§½",
    "ğŸª£",
    "ğŸ§´",
    "ğŸ›",
    "ğŸ”‘",
    "ğŸ—",
    "ğŸšª",
    "ğŸª‘",
    "ğŸ›‹",
    "ğŸ›",
    "ğŸ›Œ",
    "ğŸ§¸",
    "ğŸª†",
    "ğŸ–¼",
    "ğŸª",
    "ğŸªŸ",
    "ğŸ›",
    "ğŸ",
    "ğŸˆ",
    "ğŸ",
    "ğŸ€",
    "ğŸª„",
    "ğŸª…",
    "ğŸŠ",
    "ğŸ‰",
    "ğŸ",
    "ğŸ®",
    "ğŸ",
    "ğŸ§§",
  ],
}

interface EmojiPickerProps {
  onEmojiSelect: (emoji: string) => void
}

export function EmojiPicker({ onEmojiSelect }: EmojiPickerProps) {
  const [isOpen, setIsOpen] = useState(false)
  const [activeCategory, setActiveCategory] = useState<keyof typeof emojiCategories>("smileys")

  const categoryNames = {
    smileys: "ğŸ˜Š Smileys",
    gestures: "ğŸ‘‹ Gestures",
    hearts: "â¤ï¸ Hearts",
    animals: "ğŸ¶ Animals",
    food: "ğŸ• Food",
    activities: "âš½ Activities",
    objects: "ğŸ’¡ Objects",
  }

  return (
    <div className="relative">
      <Button
        type="button"
        variant="ghost"
        size="icon"
        onClick={() => setIsOpen(!isOpen)}
        className="h-[52px] w-[52px] rounded-xl hover:bg-accent transition-all duration-300 hover:scale-110"
      >
        <Smile className="w-5 h-5" />
      </Button>

      {isOpen && (
        <>
          <div className="fixed inset-0 z-40" onClick={() => setIsOpen(false)} />
          <div className="absolute bottom-full right-0 mb-2 w-[320px] bg-card border border-border rounded-2xl shadow-2xl z-50 overflow-hidden animate-in slide-in-from-bottom-2 duration-300">
            <div className="flex gap-1 p-2 border-b border-border bg-muted/30 overflow-x-auto">
              {(Object.keys(emojiCategories) as Array<keyof typeof emojiCategories>).map((category) => (
                <button
                  key={category}
                  type="button"
                  onClick={() => setActiveCategory(category)}
                  className={`px-3 py-1.5 rounded-lg text-xs font-medium transition-all duration-300 whitespace-nowrap ${
                    activeCategory === category
                      ? "bg-primary text-primary-foreground shadow-md"
                      : "hover:bg-accent text-muted-foreground"
                  }`}
                >
                  {categoryNames[category]}
                </button>
              ))}
            </div>

            <div className="grid grid-cols-8 gap-1 p-3 max-h-[280px] overflow-y-auto scrollbar-thin scrollbar-thumb-primary scrollbar-track-card">
              {emojiCategories[activeCategory].map((emoji, index) => (
                <button
                  key={`${emoji}-${index}`}
                  type="button"
                  onClick={() => {
                    onEmojiSelect(emoji)
                    setIsOpen(false)
                  }}
                  className="text-2xl hover:bg-accent rounded-lg p-2 transition-all duration-200 hover:scale-125 active:scale-95"
                >
                  {emoji}
                </button>
              ))}
            </div>
          </div>
        </>
      )}
    </div>
  )
}
